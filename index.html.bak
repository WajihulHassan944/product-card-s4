<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  
    <!-- cdn icon link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- custom css file  -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js"></script>

</head>
<body>
 <button id="readyBtn">Ready to Play</button>
<div class="game-box">
	
	<h1 class="game-box-header" >FANTASY FIGHTER GAME</h1>
	<div class="icon">
           <i class="fas fa-user" id="loginto"></i>
			<h4 id="nameofUser"></h4>
			<h4 id="emailofUser" style="text-transform: lowercase; display:none;"></h4>
       </div>
	 
	 <div class="flexed-div">
	<div class="name name-one">Wajih</div>
	
	
	<div class="board">
	
	
	<div class="inputs">
	<hr>
	<p>11-1</p>
	<h3>RECORD</h3>
	<p>7-0</p>
	</div>
	
	<div class="inputs">
	<hr>
	<p>32</p>
	<h3>AGE</h3>
	<p>30</p>
	</div>
	
	<div class="inputs">
	<hr>
	<p>6'4"</p>
	<h3>HEIGHT</h3>
	<p>6'4"</p>
	</div>
	
	<div class="inputs">
	<hr>
	<p>265</p>
	<h3>WEIGHT</h3>
	<p>265</p>
	</div>
	
	<div class="inputs">
	<hr>
	<p>78"</p>
	<h3>REACH</h3>
	<p>83"</p>
	</div>
	
	
	
	
	</div>
	<div class="name name-two">Abdullah</div>
	
	
	</div>
	
	
	
	</div>
	
	<a href="#" id="goToGamePage">Play the Game</a>
	
	<script>
document.addEventListener("DOMContentLoaded", function() {
 
 const urlParams = new URLSearchParams(window.location.search);
  

  const gamePageURL = "game.html?" + urlParams.toString();
  

  const gameLink = document.getElementById("goToGamePage");
  gameLink.href = gamePageURL;
});
</script>

	
	
<script>
var logintoIcon = document.getElementById("loginto");
logintoIcon.addEventListener("click", function() {
  var urlParams = new URLSearchParams(window.location.search);
  var loginSuccessful = urlParams.get('loginSuccessful') === 'true';

  if (loginSuccessful) {
    // Remove loginSuccessful=true and objectId from the URL
    var url = window.location.href.replace('?loginSuccessful=true&objectId=', '');

    // Reset the color of the icon to black
    logintoIcon.style.color = "black";

    // Show a logout alert message
    alert("You have been successfully logged out.");

    // Redirect to index.html after a short delay
    setTimeout(function() {
      window.location.href = "index.html";
    }, 1000); // Delay of 2 seconds before redirecting (adjust as needed)
  } else {
    // User is not logged in, redirect to login page
    window.location.href = "login.html";
  }
});


var urlParams = new URLSearchParams(window.location.search);
var loginSuccessful = urlParams.get('loginSuccessful') === 'true';
if (loginSuccessful) {

  logintoIcon.style.color = "red";
 }



///////
async function fetchUserData() {

const nameofUser = document.getElementById("nameofUser");
const emailofUser = document.getElementById("emailofUser");
  try {
  
    var urlParams = new URLSearchParams(window.location.search);
    var objectId = urlParams.get('objectId');

    const response = await fetch('https://tame-lime-grasshopper-tux.cyclic.app/users/' + objectId);
    if (!response.ok) {
      throw new Error('Error fetching user data');
    }

    const data = await response.json();
	nameofUser.innerHTML = `${data.name}`;
	emailofUser.innerHTML = `${data.email}`;
	
    console.log(data);
	
  } catch (error) {
    console.error('Error:', error);
    
  }
}


fetchUserData();

</script>
 </body>
</html>
